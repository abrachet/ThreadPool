Thread pool implementation in C